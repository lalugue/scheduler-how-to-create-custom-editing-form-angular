<div class="long-title">
  <h3>DXCinema Upcoming Movies</h3>
</div>
<dx-scheduler
  id="scheduler"
  [dataSource]="data"
  [views]="['day', 'timelineDay']"
  currentView="day"
  [firstDayOfWeek]="0"
  [startDayHour]="9"
  [endDayHour]="23"
  [showAllDayPanel]="false"
  [currentDate]="currentDate"
  [crossScrollingEnabled]="true"
  [cellDuration]="20"
  [height]="600"
  (onAppointmentFormOpening)="onAppointmentFormOpening($event)"
>
  <dxo-editing [allowAdding]="false"></dxo-editing>

  <div *dxTemplate="let model of 'appointment-template'">
    <div class="showtime-preview">
      <div>{{getMovieById(model.appointmentData.movieId).text}}</div>
      <div>
        Ticket Price:
        <strong>{{"$" + model.appointmentData.price}}</strong>
      </div>
      <div class="dropdown-appointment-dates">
        {{(model.appointmentData.startDate | date:'shortTime') + ' - ' +
        (model.appointmentData.endDate | date:'shortTime')}}
      </div>
    </div>
  </div>

  <div *dxTemplate="let model of 'tooltip-template'"></div>
</dx-scheduler>
<dx-popup 
  [(visible)]="isCustomPopupVisible" 
  [title]="editAppointmentData.text"
  (onHiding)="onHiding($event)">
  <div *dxTemplate="let data of 'content'">
    <dx-scroll-view width="100%" height="100%">
      <img src={{editAppointmentData.image}} class='dx-field-label'>
      <div class='dx-field-label'><p><b>{{editAppointmentData.text}}</b></p>

        <p>Year: {{editAppointmentData.year}}</p> 
        <p>Duration: {{editAppointmentData.duration}} minutes</p></div>

        <div class='dx-field-label'><b>{{formatDate(editAppointmentData.startDate, "shortTime")}} - {{formatDate(editAppointmentData.endDate, "shortTime")}}</b></div>
        <br/>

        <div class='dx-field-label'><b>Price ($): </b></div>
        <div id='priceView' class='dx-field-label'>{{editAppointmentData.seatRow && editAppointmentData.seatNumber ? setSeatPrice(editAppointmentData.price, editAppointmentData.seatRow) : "Pick a seat for pricing"}}</div>
        
        <br/><br/>

        <dx-select-box 
          id='rowView' 
          class='dx-field-label'
          [dataSource]="rows"
          [width]="400"
          placeHolder="Pick a row"
          [(value)]="editAppointmentData.seatRow">
        </dx-select-box>
        
        <br/><br/>

        <dx-select-box 
          id='seatView'
          class='dx-field-label'
          [dataSource]="seats"
          [width]="400"
          placeHolder="Pick a seat"
          [(value)]="editAppointmentData.seatNumber"
          >
        </dx-select-box>
        
        <br/><br/>


    </dx-scroll-view>    
  </div>

  <dxi-toolbar-item
    widget="dxButton"
    toolbar="bottom"
    location="after"
    [options]="{
            text: 'Confirm',
            onClick: confirmSelection
        }"
  >
  </dxi-toolbar-item>
  <dxi-toolbar-item
    widget="dxButton"
    toolbar="bottom"
    location="after"
    [options]="{
            text: 'Cancel',
            onClick: cancelSelection
        }"
  >
  </dxi-toolbar-item>
</dx-popup>
